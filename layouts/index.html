{{ define "main" }}
  <!-- Dynamically load all module pages sorted by priority -->
  {{ $modulePages := where .Site.RegularPages "Section" "modules" }}
  
  <!-- Sort them by priority and render each one -->
  {{ range sort $modulePages "Params.priority" "asc" }}
    {{ partial "module.html" (dict "context" $ "currentPage" . ) }}
  {{ end }}
{{ end }}