<!-- layouts/shortcodes/youtube-extended.html -->
{{ $id := .Get "id" }}
{{ $startAt := .Get "startAt" | default "0" }}
{{ $autoplay := cond (eq (.Get "autoplay" | default "false") "true") "1" "0" }}
{{ $title := .Get "title" | default "YouTube Video" }}
{{ $privacyEnhanced := cond (eq (.Site.Params.youtubePrivacyEnhanced | default "false") "true") "www.youtube-nocookie.com" "www.youtube.com" }}
{{ $caption := .Get "caption" | safeHTML }}

<figure>

    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
        <iframe
            src="https://{{ $privacyEnhanced }}/embed/{{ $id }}?start={{ $startAt }}&autoplay={{ $autoplay }}"
            title="{{ $title }}"
            class="centered"
            style="position: absolute; top: 0%; left: 0%; width: 100%; height: 100%; border:0;"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
        </iframe>
    </div>    

{{ if $caption }}
    <figcaption>
        {{ $caption }}
    </figcaption>
{{ end }}

</figure>

<br />